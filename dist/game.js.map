{"version":3,"file":"game.js","sources":["../src/app.ts","../src/scenes/minesweeper.ts","../src/main.ts"],"sourcesContent":["function preventHTMLContextMenu() {\n\tdocument.body.oncontextmenu = function (e) {\n\t\te.preventDefault();\n\t};\n}\n\nexport function initPage() {\n\tpreventHTMLContextMenu();\n}\n\nexport function initGame(scene: Phaser.Scene): Phaser.Game {\n\tconst config = {\n\t\ttype: Phaser.AUTO,\n\t\twidth: 1080,\n\t\theight: 1920,\n\t\tscale: {\n\t\t\tmode: Phaser.Scale.FIT,\n\t\t\tautoCenter: Phaser.Scale.CENTER_BOTH,\n\t\t},\n\t\tbackgroundColor: '#4eaefc',\n\t\tscene: scene\n\t};\n\n\treturn new Phaser.Game(config);\n}\n","// -----------------------\n// Simple Minesweeper game\n// -----------------------\n// Features:\n// - touch support\n// - mouse support\n// TODO:\n// - right click flag (swap button for touch)\n// - game menu and ui \n//   (https://blog.ourcade.co/posts/2020/phaser-3-google-fonts-webfontloader/)\n// - configurable settings\n// - save game sate\n\n\n// Types\ntype Scene = Phaser.Scene;\nconst Scene = Phaser.Scene;\n\ntype Vector2 = Phaser.Math.Vector2;\nconst Vector2 = Phaser.Math.Vector2;\n\ntype GameObject = Phaser.GameObjects.GameObject;\ntype Text = Phaser.GameObjects.Text;\ntype Container = Phaser.GameObjects.Container;\ntype Rectangle = Phaser.GameObjects.Rectangle;\ntype PositionObject = Container | Rectangle;\n\nenum GameState {\n\tPlaying,\n\tGameEnd\n}\n\n\n// Globals\nlet gameSate: GameState = GameState.Playing;\nlet camMain: Phaser.Cameras.Scene2D.Camera;\nlet camCenter: () => Vector2;\nlet world: Container;\nlet flagContainer: Container;\n\n// Grid settings\nconst gridSize = new Vector2(10, 10);\nconst gapSize = new Vector2(10, 10);\nconst tileSize = new Vector2(85, 85);\nconst cellSize = tileSize.clone().add(gapSize);\nconst mineCount = 15;\nlet tileLeft = gridSize.x * gridSize.y - mineCount;\n\n// Colors\nconst tileVisualOriginalColor: integer = 0xffffff;\nconst tileVisualClickedColor: integer = 0x0066ff;\nconst backgroundColor: integer = 0x5088ff;\n\n// Tile input\nlet curTileClicked: Rectangle = null;\nlet curTileVisual: Rectangle = null;\nlet clickCallBack = () => { };\n\n// Tiles\nlet bgTileArray: Rectangle[] = [];\nlet tileArray: Container[] = [];\nlet mineArray: Text[] = [];\nlet numArray: integer[] = [];\nlet flagArray: Text[] = [];\n\n\n//#region Game Scene\nexport default class MinesweeperScene extends Scene {\n\tconstructor() {\n\t\tsuper('Minesweeper');\n\t}\n\n\tpreload() {\n\t\t// Initialize globals\n\t\tcamMain = this.cameras.main;\n\t\tcamCenter = () => new Vector2(camMain.centerX, camMain.centerY);\n\t\tworld = this.add.container(camCenter().x, camCenter().y);\n\t\tflagContainer = this.add.container(0, 0);\n\n\t\t// Initialize arrays\n\t\tinitNumberArray();\n\t\tinitFlagArray();\n\t}\n\n\tcreate() {\n\t\t// Generate Objects\n\t\tconst background = generateBackground(this);\n\t\tconst bgtileContainer = generateBGTiles(this);\n\t\tconst tileContainer = generateTiles(this);\n\t\tconst minesContainer = generateMines(this);\n\t\tconst textContainer = generateNumberText(this);\n\n\t\t// Add Objects\n\t\tworld.add(background);\n\t\tworld.add(bgtileContainer);\n\t\tworld.add(minesContainer);\n\t\tworld.add(textContainer);\n\t\tworld.add(tileContainer);\n\t\tworld.add(flagContainer);\n\n\t\t// Handle input\n\t\tonTilePointerUp(this);\n\t}\n}\n//#endregion\n\n//#region Utility\nfunction toCoord(i: integer): Vector2 {\n\tlet result = new Vector2(-1, -1);\n\tresult.y = Math.floor(i / gridSize.x);\n\tresult.x = i - (result.y * gridSize.x);\n\treturn result;\n}\n\nfunction toIndex(v: Vector2): integer {\n\tif (v.x < 0 || v.y < 0 || v.x >= gridSize.x || v.y >= gridSize.y)\n\t\treturn -1;\n\treturn gridSize.x * v.y + v.x;\n}\n\nfunction gridAlignCenter(items: PositionObject[], gridSize: Vector2, cellSize: Vector2) {\n\tconst initial_x = (cellSize.x - cellSize.x * gridSize.x) * 0.5;\n\tconst initial_y = (cellSize.y - cellSize.y * gridSize.y) * 0.5;\n\tlet curPosX = initial_x;\n\tlet curPosY = initial_y;\n\tlet index_x = 0;\n\tlet index_y = 0;\n\n\tfor (let item of items) {\n\t\tif (item == null)\n\t\t\tcontinue;\n\n\t\titem.setPosition(curPosX, curPosY);\n\t\tif (index_x < gridSize.x - 1) {\n\t\t\tindex_x += 1;\n\t\t\tcurPosX += cellSize.x;\n\t\t\tcontinue;\n\t\t}\n\t\tif (index_y < gridSize.y - 1) {\n\t\t\tindex_x = 0;\n\t\t\tcurPosX = initial_x;\n\t\t\tindex_y += 1;\n\t\t\tcurPosY += cellSize.y;\n\t\t}\n\t}\n}\n\nfunction getRandomIndices(count: integer): integer[] {\n\tvar array: integer[] = [];\n\tfor (let i = 0; i < gridSize.x * gridSize.y; i++)\n\t\tarray.push(i);\n\n\tlet curIndex = array.length;\n\tlet tmpValue = 0;\n\tlet randIndex = 0;\n\twhile (0 != curIndex) {\n\t\trandIndex = Math.floor(Math.random() * curIndex);\n\t\tcurIndex--;\n\t\ttmpValue = array[curIndex];\n\t\tarray[curIndex] = array[randIndex];\n\t\tarray[randIndex] = tmpValue;\n\t}\n\n\treturn array.slice(0, count);\n}\n//#endregion\n\n//#region Initialize\nfunction initNumberArray() {\n\tfor (let i = 0; i < gridSize.x * gridSize.y; i++)\n\t\tnumArray.push(0);\n}\n\nfunction initFlagArray() {\n\tfor (let i = 0; i < gridSize.x * gridSize.y; i++)\n\t\tflagArray.push(null);\n}\n//#endregion\n\n//#region Game Logic\nfunction removeTileInteraction() {\n\tfor (let item of tileArray) {\n\t\titem?.getAll().forEach((child: Rectangle) => {\n\t\t\tif (child) {\n\t\t\t\tif (child.alpha != 0) child.setAlpha(0.5);\n\t\t\t\tchild.removeInteractive();\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction gameWin() {\n\tgameSate = GameState.GameEnd;\n\t// do stuff\n\tconsole.log(\"Game Win!\");\n\tremoveTileInteraction();\n}\n\nfunction gameLose() {\n\tgameSate = GameState.GameEnd;\n\t// do stuff\n\tconsole.log(\"Game Lose!\");\n\tremoveTileInteraction();\n}\n//#endregion\n\n//#region Generate GameObjects\nfunction generateBackground(scene: Scene): Rectangle {\n\treturn scene.add.rectangle(\n\t\t0, 0,\n\t\tgridSize.x * cellSize.x + gapSize.x,\n\t\tgridSize.y * cellSize.y + gapSize.y,\n\t\tbackgroundColor\n\t);\n}\n\nfunction generateBGTiles(scene: Scene): Container {\n\tfor (let i = 0; i < gridSize.x * gridSize.y; i++)\n\t\tbgTileArray.push(createBGTile(scene, tileSize));\n\tgridAlignCenter(bgTileArray, gridSize, cellSize);\n\treturn scene.add.container(0, 0, bgTileArray);\n}\n\nfunction generateTiles(scene: Scene): Container {\n\tfor (let i = 0; i < gridSize.x * gridSize.y; i++)\n\t\ttileArray.push(createTile(scene, tileSize, gapSize, i));\n\tgridAlignCenter(tileArray, gridSize, cellSize);\n\treturn scene.add.container(0, 0, tileArray);\n}\n\nfunction generateMines(scene: Scene): Container {\n\tfor (let i of getRandomIndices(mineCount)) {\n\t\tconst mine = createMine(scene, tileSize.clone().divide(new Vector2(2, 2))).\n\t\t\tsetPosition(tileArray[i].x, tileArray[i].y);\n\t\tmineArray.push(mine);\n\t\tnumArray[i] = 10;\n\n\t\tconst pos = toCoord(i);\n\t\tconst rightInBound = pos.x + 1 < gridSize.x;\n\t\tconst leftInBound = pos.x - 1 >= 0;\n\t\tconst upInBound = pos.y + 1 < gridSize.y;\n\t\tconst downInBound = pos.y - 1 >= 0;\n\n\t\tif (rightInBound)\n\t\t\tnumArray[toIndex(pos.clone().add(new Vector2(+1, +0)))] += 1;\n\t\tif (leftInBound)\n\t\t\tnumArray[toIndex(pos.clone().add(new Vector2(-1, +0)))] += 1;\n\n\t\tif (upInBound)\n\t\t\tnumArray[toIndex(pos.clone().add(new Vector2(+0, +1)))] += 1;\n\t\tif (downInBound)\n\t\t\tnumArray[toIndex(pos.clone().add(new Vector2(+0, -1)))] += 1;\n\n\t\tif (upInBound && rightInBound)\n\t\t\tnumArray[toIndex(pos.clone().add(new Vector2(+1, +1)))] += 1;\n\t\tif (upInBound && leftInBound)\n\t\t\tnumArray[toIndex(pos.clone().add(new Vector2(-1, +1)))] += 1;\n\n\t\tif (downInBound && rightInBound)\n\t\t\tnumArray[toIndex(pos.clone().add(new Vector2(+1, -1)))] += 1;\n\t\tif (downInBound && leftInBound)\n\t\t\tnumArray[toIndex(pos.clone().add(new Vector2(-1, -1)))] += 1;\n\t}\n\n\treturn scene.add.container(0, 0, mineArray);\n}\n\nfunction generateNumberText(scene: Scene): Container {\n\tconst numberTexts: Text[] = [];\n\tfor (let i = 0; i < gridSize.x * gridSize.y; i++) {\n\t\tif (numArray[i] == 0 || numArray[i] >= 10)\n\t\t\tcontinue;\n\t\tconst txt = scene.add.text(tileArray[i].x, tileArray[i].y, numArray[i].toString());\n\t\ttxt.setOrigin(0.5);\n\t\ttxt.setFontSize(tileSize.y * 0.43);\n\t\ttxt.setFontStyle('Bold');\n\t\tnumberTexts.push(txt);\n\t}\n\treturn scene.add.container(0, 0, numberTexts);\n}\n//#endregion\n\n//#region Create GamObject\nfunction createBGTile(scene: Scene, size: Vector2): Rectangle {\n\tconst tile = scene.add.rectangle(0, 0, size.x, size.y, 0xffffff, 0.3);\n\treturn tile;\n}\n\nfunction createTile(scene: Scene, size: Vector2, gapSize: Vector2, index: integer): Container {\n\tconst tileVisual = scene.add.\n\t\trectangle(0, 0, size.x, size.y, tileVisualOriginalColor);\n\n\tconst tileClick = scene.add.\n\t\trectangle(0, 0, size.x + gapSize.x, size.y + gapSize.y, 0x5555ff, 0).\n\t\tsetInteractive();\n\n\tconst container = scene.add.\n\t\tcontainer(0, 0, [tileVisual, tileClick]);\n\n\t// Hover effect\n\tfunction onOver() { tileClick.setFillStyle(tileClick.fillColor, 0.3); }\n\tfunction onOut() { tileClick.setFillStyle(tileClick.fillColor, 0); }\n\ttileClick.on('pointerover', onOver);\n\ttileClick.on('pointerout', onOut);\n\tscene.input.on('gameout', onOut);\n\n\t// On Click\n\tonTilePointerDown(scene, tileClick, tileVisual, index);\n\n\treturn container;\n}\n\nfunction createMine(scene: Scene, size: Vector2): Text {\n\tconst mine = scene.add.text(0, 0, \"ðŸ’£\");\n\tmine.setOrigin(0.5);\n\tmine.setPadding(20);\n\tmine.setFontSize(tileSize.y * 0.65);\n\treturn mine;\n}\n\nfunction createFlag(scene: Scene): Text {\n\tconst flag = scene.add.text(0, 0, \"ðŸš©\");\n\tflag.setOrigin(0.5);\n\tflag.setPadding(20);\n\tflag.setFontSize(tileSize.y * 0.65);\n\tflagContainer.add(flag);\n\treturn flag;\n}\n//#endregion\n\n//#region Tile logic\nfunction removeTile(tileChildren: GameObject[]) {\n\ttileChildren.forEach(child => { child.destroy(); });\n\tif (--tileLeft == 0) {\n\t\tgameWin();\n\t}\n}\n\nfunction removeFlag(pos: Vector2) {\n\tif (flagArray[toIndex(pos)] != null) {\n\t\tflagArray[toIndex(pos)].destroy();\n\t\tflagArray[toIndex(pos)] = null\n\t}\n}\n\nfunction openTile(pos: Vector2) {\n\tconst children = tileArray[toIndex(pos)].getAll();\n\tif (children.length == 0) return;\n\tremoveTile(children);\n\tremoveFlag(pos);\n}\n\nfunction openTileRecursive(pos: Vector2) {\n\t// TODO:\n\t// Do not use this stupid implementation\n\t// this is really really horrible...\n\n\tconst children = tileArray[toIndex(pos)].getAll();\n\tif (children.length == 0) return;\n\tremoveTile(children);\n\tremoveFlag(pos);\n\n\tfunction openNext(nextPos: Vector2) {\n\t\tif (numArray[toIndex(nextPos)] == 0)\n\t\t\topenTileRecursive(nextPos);\n\t\telse if (numArray[toIndex(nextPos)] < 10)\n\t\t\topenTile(nextPos);\n\t}\n\n\tconst rightInBound = pos.x + 1 < gridSize.x;\n\tconst leftInBound = pos.x - 1 >= 0;\n\tconst upInBound = pos.y + 1 < gridSize.y;\n\tconst downInBound = pos.y - 1 >= 0;\n\n\tif (rightInBound)\n\t\topenNext(pos.clone().add(new Vector2(+1, +0)));\n\tif (leftInBound)\n\t\topenNext(pos.clone().add(new Vector2(-1, +0)));\n\tif (upInBound)\n\t\topenNext(pos.clone().add(new Vector2(+0, +1)));\n\tif (downInBound)\n\t\topenNext(pos.clone().add(new Vector2(+0, -1)));\n\tif (upInBound && rightInBound)\n\t\topenNext(pos.clone().add(new Vector2(+1, +1)));\n\tif (upInBound && leftInBound)\n\t\topenNext(pos.clone().add(new Vector2(-1, +1)));\n\tif (downInBound && rightInBound)\n\t\topenNext(pos.clone().add(new Vector2(+1, -1)));\n\tif (downInBound && leftInBound)\n\t\topenNext(pos.clone().add(new Vector2(-1, -1)));\n}\n\nfunction onTilePointerDown(scene: Scene, tileClick: Rectangle, tileVisual: Rectangle, index: integer) {\n\tfunction leftClick() {\n\t\tif (flagArray[index]) return;\n\n\t\tcurTileClicked = tileClick;\n\t\tcurTileVisual = tileVisual;\n\t\tcurTileVisual.setFillStyle(tileVisualClickedColor);\n\t\tclickCallBack = () => {\n\t\t\tif (numArray[index] > 9) {\n\t\t\t\tgameLose();\n\t\t\t\topenTile(toCoord(index));\n\t\t\t} else {\n\t\t\t\topenTileRecursive(toCoord(index));\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction rightClick() {\n\t\tif (curTileClicked) return;\n\n\t\t// Toggle flag\n\t\tif (flagArray[index]) {\n\t\t\tflagArray[index].destroy();\n\t\t\tflagArray[index] = null;\n\t\t}\n\t\telse {\n\t\t\tflagArray[index] = createFlag(scene);\n\t\t\tflagArray[index].setPosition(tileArray[index].x, tileArray[index].y);\n\t\t}\n\t}\n\n\t// Handle click event\n\ttileClick.on('pointerdown', (pointer: Phaser.Input.Pointer) => {\n\t\tswitch (pointer.button) {\n\t\t\tcase 0:\n\t\t\t\tleftClick();\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\trightClick();\n\t\t\t\tbreak;\n\t\t}\n\t});\n}\n\nfunction onTilePointerUp(scene: Scene) {\n\tfunction onPointerUp() {\n\t\tif (!curTileClicked) return;\n\t\tcurTileVisual.setFillStyle(tileVisualOriginalColor);\n\t\tcurTileVisual = null;\n\t\tcurTileClicked = null;\n\t\tclickCallBack = () => { };\n\t}\n\n\tscene.input.on('gameout', onPointerUp);\n\tscene.input.on('pointerup', (pointer: Phaser.Input.Pointer) => {\n\t\tif (pointer.button == 0) onPointerUp();\n\t});\n\n\tscene.input.on('gameobjectup', (pointer: Phaser.Input.Pointer, obj: GameObject) => {\n\t\tif (pointer.button != 0)\n\t\t\treturn;\n\n\t\tif (obj == curTileClicked)\n\t\t\tclickCallBack();\n\n\t\tif (curTileVisual != null) {\n\t\t\tcurTileVisual.setFillStyle(tileVisualOriginalColor);\n\t\t\tcurTileVisual = null;\n\t\t}\n\n\t\tcurTileClicked = null;\n\t\tclickCallBack = () => { };\n\t});\n}\n//#endregion\n","import * as App from './app';\nimport MinesweeperScene from './scenes/minesweeper';\n\n\nApp.initPage();\nApp.initGame(new MinesweeperScene());"],"names":["App.initPage","App.initGame"],"mappings":"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"}